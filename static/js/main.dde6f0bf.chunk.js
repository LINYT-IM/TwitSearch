(this["webpackJsonpminimal-twitter"]=this["webpackJsonpminimal-twitter"]||[]).push([[0],{37:function(e,t,n){},42:function(e){e.exports=JSON.parse("{}")},43:function(e){e.exports=JSON.parse("{}")},49:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(23),s=n.n(a),i=(n(37),n(6)),o=n(7),u=n(9),l=n(8),j=n(5),d=n(20),h=n(26),b=n.n(h),O=n(16),p=n(2),m=n(31),v=(n(42),n(43),{}),f={};function x(){return(x=Object(m.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v={},f={},e.next=4,fetch("http://localhost:5000/flask/search",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({keyword:t,count:n})}).then((function(e){return e.json()})).then((function(e){for(var t=0,n=Object.entries(e.users);t<n.length;t++){var c=Object(d.a)(n[t],2),r=c[0],a=c[1];v[r]=a}for(var s=0,i=Object.entries(e.tweets);s<i.length;s++){var o=Object(d.a)(i[s],2),u=o[0],l=o[1];f[u]=l}console.log("done")}));case 4:return e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e({tweets:Object(p.a)({},f),users:Object(p.a)({},v)})}),500)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t=e.text,n=e.author,c=e.replyingTo;return new Promise((function(e,r){var a=function(e){var t=e.author,n=e.text,c=e.replyingTo,r=void 0===c?null:c;return{author:t,id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),likes:[],replies:[],text:n,timestamp:Date.now(),replyingTo:r}}({text:t,author:n,replyingTo:c});setTimeout((function(){f=Object(p.a)(Object(p.a)({},f),{},Object(O.a)({},a.id,a)),v=Object(p.a)(Object(p.a)({},v),{},Object(O.a)({},n,Object(p.a)(Object(p.a)({},v[n]),{},{tweets:v[n].tweets.concat([a.id])}))),e(a)}),1e3)}))}function w(e){return function(e){var t=e.id,n=e.hasLiked,c=e.authedUser;return new Promise((function(e,r){setTimeout((function(){f=Object(p.a)(Object(p.a)({},f),{},Object(O.a)({},t,Object(p.a)(Object(p.a)({},f[t]),{},{likes:!0===n?f[t].likes.filter((function(e){return e!==c})):f[t].likes.concat([c])}))),e()}),500)}))}(e)}function y(e,t){return function(e,t){return x.apply(this,arguments)}(e,t)}var k="RECEIVE_USERS",S="UPDATE_USERS";function N(e){return{type:k,users:e}}var L=n(14),T=n.n(L),E="RECEIVE_TWEETS",C="TOGGLE_TWEETS",U="ADD_TWEET",_="UPDATE_TWEET";function A(e,t){return function(n,c){var r,a=c().authedUser;return n(Object(L.showLoading)()),(r={text:e,author:a,replyingTo:t},g(r)).then((function(e){return n(function(e){return{type:U,tweet:e}}(e))})).then((function(){return n(Object(L.hideLoading)())}))}}function D(e){var t=e.id,n=e.authedUser,c=e.hasLiked;return{type:C,id:t,hasLiked:c,authedUser:n}}function P(e){return function(t){return t(D(e)),w(e).catch((function(n){console.warn("error at handleToggleTweet: ",n),t(D(e)),alert("the was an error liking the tweet. Try again.")}))}}function q(e,t){return function(n){return n(Object(L.showLoading)()),y(e,t).then((function(e){var t;n(N(e.users)),n((t=e.tweets,{type:_,tweets:t}))})).then((function(){return n(Object(L.hideLoading)())}))}}var I="SET_AUTHED_USER";function F(){return function(e){return e(Object(L.showLoading)()),Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(p.a)({},v))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(p.a)({},f))}),1e3)}))]).then((function(e){var t=Object(d.a)(e,2);return{users:t[0],tweets:t[1]}})).then((function(t){var n=t.users,c=t.tweets;e(N(n)),e(function(e){return{type:E,tweets:e}}(c)),e({type:I,id:"tylermcginnis"}),e(Object(L.hideLoading)())}))}}var R=n(13),B=n(4);function M(e){var t=new Date(e),n=t.toLocaleTimeString("en-US");return n.substr(0,5)+n.slice(-2)+" | "+t.toLocaleDateString()}function H(e,t,n,c){var r=e.id,a=e.likes,s=e.replies,i=e.text,o=e.timestamp,u=t.name,l=t.avatarURL;return{name:u,uid:t.uid,id:r,timestamp:o,text:i,avatar:l,likes:a.length,replies:s.length,hasLiked:a.includes(n),parent:c?{author:c.author,id:c.id}:null}}var J=n(21),W=n(1),K=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).toParent=function(t,n){t.preventDefault(),e.props.history.push("/tweet/".concat(n))},e.handleLike=function(t){t.preventDefault();var n=e.props,c=n.authedUser,r=n.dispatch,a=n.tweet;r(P({id:a.id,hasLiked:a.hasLiked,authedUser:c}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.tweet;if(null===e)return Object(W.jsx)("p",{children:"this tweet doesn't existed"});var t=e.name,n=e.id,c=e.timestamp,r=e.text,a=e.avatar,s=e.likes,i=e.replies,o=e.hasLiked,u=(e.parent,e.uid);return Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("div",{className:"tweet",children:[Object(W.jsx)("div",{className:"avatar",children:Object(W.jsx)(R.b,{to:{pathname:"https://twitter.com/"+u},target:"_blank",children:Object(W.jsx)("img",{src:a,alt:"avatar of ".concat(t)})})}),Object(W.jsxs)("div",{className:"tweet-info",children:[Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{children:t}),Object(W.jsxs)("span",{className:"userid",children:["@",u]}),Object(W.jsx)("div",{children:M(c)}),Object(W.jsx)("p",{children:r})]}),Object(W.jsxs)("div",{className:"tweet-icons",children:[Object(W.jsx)(J.a,{className:"tweet-icon"}),Object(W.jsx)("span",{children:0!==i&&i}),Object(W.jsx)("button",{className:"heart-button",onClick:this.handleLike,children:o?Object(W.jsx)(J.c,{color:"#e0245e",className:"tweet-icon"}):Object(W.jsx)(J.d,{className:"tweet-icon"})}),Object(W.jsx)("span",{children:s>0&&s})]})]}),Object(W.jsx)("div",{className:"orig-tweet",children:Object(W.jsx)(R.b,{to:{pathname:"https://twitter.com/"+u+"/status/"+n},target:"_blank",children:Object(W.jsx)("div",{class:"ui icon button",children:Object(W.jsx)(J.b,{class:"orig-icon"})})})})]})})}}]),n}(c.Component);var G=Object(B.f)(Object(j.connect)((function(e,t){var n=e.authedUser,c=e.users,r=e.tweets,a=r[t.id],s=a?r[a.replyingTo]:null;return{authedUser:n,tweet:a?H(a,c[a.author],n,s):null}}))(K)),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tweetIds,n=e.pages,c=parseInt(n.split("/")[2]);return isNaN(c)&&(c=1),t=t.splice(20*(c-1),20),Object(W.jsx)("div",{children:Object(W.jsx)("ul",{className:"dashboard-list",children:t.map((function(e){return Object(W.jsx)("li",{children:Object(W.jsx)(G,{id:e})},e)}))})})}}]),n}(c.Component);var Y=Object(j.connect)((function(e,t){var n=e.tweets;return{tweetIds:Object.keys(n).sort((function(e,t){return n[t].timestamp-n[e].timestamp})),pages:t.location.pathname}}))(V),z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={text:"",toHome:!1},e.handleChange=function(t){var n=t.target.value;e.setState({text:n})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.text,c=e.props,r=c.dispatch,a=c.id;r(A(n,a)),e.setState({text:"",toHome:!a})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.text,n=e.toHome,c=140-t.length;return n?Object(W.jsx)(B.a,{to:"/"}):Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{className:"center",children:"Compose new Tweet"}),Object(W.jsxs)("form",{className:"new-tweet",onSubmit:this.handleSubmit,children:[Object(W.jsx)("textarea",{placeholder:"what's happening?",value:t,onChange:this.handleChange,maxLength:140,className:"textarea"}),c<=40&&Object(W.jsx)("div",{className:"tweet-length",children:c}),Object(W.jsx)("button",{className:"btn",type:"submit",disabled:""===t,children:"Submit"})]})]})}}]),n}(c.Component),Q=Object(j.connect)()(z),X=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.replies;return Object(W.jsxs)("div",{children:[Object(W.jsx)(G,{id:t}),Object(W.jsx)(Q,{id:t}),n.length>0&&Object(W.jsx)("h3",{className:"center",children:"Replies"}),Object(W.jsx)("ul",{children:n.map((function(e){return Object(W.jsx)("li",{children:Object(W.jsx)(G,{id:e})},e)}))})]})}}]),n}(c.Component);var Z=Object(j.connect)((function(e,t){var n=e.tweets,c=(e.authedUser,e.users,t.match.params.id);return{id:c,replies:n[c]?n[c].replies.sort((function(e,t){return n[t].timestamp-n[e].timestamp})):[]}}))(X),$=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.userLikes;return Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{className:"center",children:"Your Likes"}),Object(W.jsx)("ul",{className:"dashboard-list",children:e.map((function(e){return Object(W.jsx)("li",{children:Object(W.jsx)(G,{id:e})},e)}))})]})}}]),n}(c.Component),ee=Object(j.connect)((function(e){var t=e.authedUser,n=e.tweets,c=Object.keys(n).sort((function(e,t){return n[t].timestamp-n[e].timestamp})),r=[];return c.forEach((function(e){return n[e].likes.forEach((function(n){n===t&&r.push(e)}))})),{userLikes:r}}))($),te=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(W.jsx)("nav",{className:"nav",children:Object(W.jsxs)("ul",{children:[Object(W.jsx)("li",{children:Object(W.jsx)(R.c,{to:"/",exact:!0,activeClassName:"active",children:"Home"})}),Object(W.jsx)("li",{children:Object(W.jsx)(R.c,{to:"/likes",exact:!0,activeClassName:"active",children:"Likes"})})]})})}}]),n}(c.Component),ne=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(e){var t=document.documentElement.getAttribute("data-theme");t&&"light"!==t?(document.documentElement.setAttribute("data-theme","light"),document.querySelector(".toggle-btn").textContent="Light Mode"):(document.documentElement.setAttribute("data-theme","dark"),document.querySelector(".toggle-btn").textContent="Dark Mode")},e.showSetting=function(e){var t=document.querySelector(".modal.setting").classList;t.contains("active")?t.remove("active"):t.add("active")},e.closeSetting=function(e){document.querySelector(".modal.setting").classList.remove("active")},e.returnSetting=function(e){document.querySelector(".modal.setting").classList.remove("active")},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:"menu-container",children:Object(W.jsx)("button",{className:"setting-btn",onClick:this.showSetting,children:Object(W.jsx)("i",{className:"icon setting"})})}),Object(W.jsxs)("div",{class:"ui mini modal setting",children:[Object(W.jsx)("div",{class:"header",children:"Setting"}),Object(W.jsxs)("div",{class:"content",children:[Object(W.jsxs)("div",{class:"setting-cont",children:[Object(W.jsx)("span",{children:"Mode: "}),Object(W.jsx)("button",{className:"toggle-btn",onClick:this.handleChange,children:"Light mode"})]}),Object(W.jsxs)("div",{class:"setting-cont",children:[Object(W.jsx)("span",{children:"Max Count: "}),Object(W.jsxs)("select",{class:"ui selection dropdown",id:"max-count",children:[Object(W.jsx)("option",{selected:!0,value:"10",children:"10"}),Object(W.jsx)("option",{value:"30",children:"30"}),Object(W.jsx)("option",{value:"100",children:"100"})]})]})]}),Object(W.jsx)("div",{class:"actions",children:Object(W.jsx)("div",{class:"ui cancel button",onClick:this.closeSetting,children:"Close"})})]})]})}}]),n}(c.Component),ce=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._handleKeyDown=function(t){if("Enter"===t.key){var n=t.target.value;(0,e.props.dispatch)(q(n,document.getElementById("max-count").value)).then((function(){console.log("all done")})),console.log("keyword: "+n)}},e._onFocus=function(e){var t=e.target.parentNode;(t=t.querySelector("i")).classList.remove("search"),t.classList.add("times"),t.classList.add("circle")},e._onBlur=function(e){var t=e.target.parentNode;(t=t.querySelector("i")).classList.add("search"),t.classList.remove("times"),t.classList.remove("circle")},e._clearInput=function(e){document.querySelector("#inputField").classList.contains("circle")&&(document.querySelector("input.prompt").value="")},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(W.jsxs)("div",{className:"ui search",children:[Object(W.jsxs)("div",{class:"ui icon input",children:[Object(W.jsx)("i",{id:"inputField",class:"search icon",onClick:this._clearInput}),Object(W.jsx)("input",{class:"prompt",type:"text",placeholder:"Search...",onKeyDown:this._handleKeyDown,onFocus:this._onFocus,onBlur:this._onBlur})]}),Object(W.jsx)("div",{class:"results"})]})}}]),n}(c.Component);var re=Object(B.f)(Object(j.connect)((function(e){return{value:e.value}}))(ce)),ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(e){var t=document.documentElement.getAttribute("data-theme");t&&"light"!==t?document.documentElement.setAttribute("data-theme","light"):document.documentElement.setAttribute("data-theme","dark")},e}return Object(o.a)(n,[{key:"render",value:function(){if(this.props.pages>0){for(var e=[],t=0;t<this.props.pages;t++)e.push(t+1);return Object(W.jsx)("div",{className:"pages",children:Object(W.jsx)("div",{className:"ui pagination menu",children:e.map((function(e){return Object(W.jsx)(R.c,{to:"/pages/"+String(e),exact:!0,activeClassName:"active",className:" item",children:e})}))})})}return Object(W.jsx)("div",{})}}]),n}(c.Component);var se=Object(j.connect)((function(e){return{value:e.value,pages:Object.keys(e.tweets).length/20}}))(ae),ie=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(F())}},{key:"render",value:function(){return Object(W.jsx)(R.a,{children:Object(W.jsxs)(c.Fragment,{children:[Object(W.jsx)(T.a,{}),Object(W.jsxs)("div",{className:"container",children:[Object(W.jsxs)("div",{className:"nav",children:[Object(W.jsx)(te,{}),Object(W.jsx)(re,{}),Object(W.jsx)(ne,{})]}),this.props.loading?null:Object(W.jsxs)("div",{children:[Object(W.jsx)(B.b,{path:"/pages/:pages",exact:!0,component:Y}),Object(W.jsx)(B.b,{path:"/",exact:!0,component:Y}),Object(W.jsx)(B.b,{path:"/tweet/:id",component:Z}),Object(W.jsx)(B.b,{path:"/likes",component:ee})]}),Object(W.jsx)(se,{})]})]})})}}]),n}(r.a.Component);var oe=Object(j.connect)((function(e){return{loading:null===e.authedUser,pages:Object.keys(e.tweets).length/20+1}}))(ie),ue=n(18);var le=Object(ue.b)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return t.id;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(p.a)(Object(p.a)({},e),t.users);case S:return Object(p.a)({},t.users);default:return e}},tweets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(p.a)(Object(p.a)({},e),t.tweets);case C:return Object(p.a)(Object(p.a)({},e),{},Object(O.a)({},t.id,Object(p.a)(Object(p.a)({},e[t.id]),{},{likes:t.hasLiked?e[t.id].likes.filter((function(e){return e!==t.authedUser})):e[t.id].likes.concat([t.authedUser])})));case U:var n=t.tweet,c={};return null!==n.replyingTo&&(c=Object(O.a)({},n.replyingTo,Object(p.a)(Object(p.a)({},e[n.replyingTo]),{},{replies:e[n.replyingTo].replies.concat([n.id])}))),Object(p.a)(Object(p.a)({},e),{},Object(O.a)({},n.id,n),c);case _:return Object(p.a)({},t.tweets);default:return e}},loadingBar:L.loadingBarReducer}),je=n(32),de=function(e){return function(t){return function(n){console.group(n.type),console.log("the action",n);var c=t(n);return console.log("the new state: ",e.getState()),console.groupEnd(),c}}},he=Object(ue.a)(je.a,de),be=Object(ue.c)(le,he);s.a.render(Object(W.jsx)(j.Provider,{store:be,children:Object(W.jsx)(oe,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.dde6f0bf.chunk.js.map